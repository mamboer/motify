/*!
 * Motify 1.0.0
 * Various creative css3 styles and effects for unobtrusive notifications on a website 
 * Inspired by http://tympanus.net/Development/NotificationStyles/index.html
 * @dependencies 
 *  1. classy.js <http://faso.me/classy>
 *  2. modernizr
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * Copyright 2015, FASO.ME <http://www.faso.me>
 */
!function(t,i){"object"==typeof exports?module.exports=i(require("./classy")):"function"==typeof define&&define.amd?define(["classy"],i):t.Motify=i(t.classy)}(this,function(t){function i(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);return t}function n(t){var i=t.elemPrefix+"wrapper",n=o(["wrapper","wrapper-"+t.position],t.elemPrefix).join(" "),e=document.getElementById(i);return e||(e=document.createElement("div"),e.className=n,e.id=i,document.body.appendChild(e)),e}function o(t,i){"string"==typeof t&&(t=[t]);for(var n=0;n<t.length;n++)t[n]=(i||"")+t[n];return t}function e(t,i,n){for(var o,e=new RegExp(n?"%([a-zA-z0-9]+)%":"@{([a-zA-z0-9]+)}");null!==(o=e.exec(t));){var s=i[o[1]]||"";t=t.replace(new RegExp(o[0],"g"),s)}return t}function s(t){this.options=i({},this.options),i(this.options,t),this._init()}var r=(window.document.documentElement,{animations:Modernizr.cssanimations}),p={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},a=p[Modernizr.prefixed("animation")];return s.prototype.options={elemPrefix:"mt-",message:"yo!",layout:"growl",effect:"slide",type:"error",ttl:6e3,position:"right-top",bodyTpl:'<div class="@{elemPrefix}box-inner">@{message}</div><span class="@{elemPrefix}close"></span>',onClose:function(){return!1},onOpen:function(){return!1}},s.prototype._init=function(){this.wrapper=n(this.options),this.ntf=document.createElement("div"),this.ntf.className=o(["box",this.options.layout,"effect-"+this.options.effect,"type-"+this.options.type,"pos-"+this.options.position],this.options.elemPrefix).join(" "),this.ntf.innerHTML=e(this.options.bodyTpl,this.options),this.options.clClose=this.options.elemPrefix+"close",this.options.clShow=this.options.elemPrefix+"show",this.options.clHide=this.options.elemPrefix+"hide","top"===this.options.position.slice(-3)?this.wrapper.appendChild(this.ntf):this.wrapper.insertBefore(this.ntf,this.wrapper.firstChild);var t=this;this.options.ttl&&(this.dismissttl=setTimeout(function(){t.active&&t.dismiss()},this.options.ttl)),this._initEvents()},s.prototype._initEvents=function(){var t=this;this.ntf.querySelector("."+this.options.clClose).addEventListener("click",function(){t.dismiss()})},s.prototype.show=function(){this.active=!0,t.remove(this.ntf,this.options.clHide),t.add(this.ntf,this.options.clShow),"function"==typeof this.options.onOpen&&this.options.onOpen()},s.prototype.dismiss=function(){var i=this;this.active=!1,clearTimeout(this.dismissttl),t.remove(this.ntf,this.options.clShow),setTimeout(function(){t.add(i.ntf,i.options.clHide),"function"==typeof i.options.onClose&&i.options.onClose()},25);var n=function(t){if(r.animations){if(t.target!==i.ntf)return!1;this.removeEventListener(a,n)}i.wrapper.removeChild(this)};r.animations?this.ntf.addEventListener(a,n):n()},s});